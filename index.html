<select id="compoundSelect">
  <option value="Na2CO3">Sodium Carbonate (Na₂CO₃)</option>
  <option value="NaCl">Sodium Chloride (NaCl)</option>
  <option value="CaCl2">Calcium Chloride (CaCl₂)</option>
  <option value="CaCO3">Calcium Carbonate (CaCO₃)</option>
  <option value="MgSO4">Magnesium Sulfate (MgSO₄)</option>
  <option value="MgCl2">Magnesium Chloride (MgCl₂)</option>
  <option value="Glucose">Glucose (C₆H₁₂O₆)</option>
</select>

<script>
// ADD THIS FUNCTION EXACTLY ONCE
function drawGlucoseMolecule(ctx, originX, originY) {
  const scale = 0.6;

  const backOxygens = [
    { dx: -10, dy: -10, size: 10, color: 'red' },
    { dx: 40, dy: -10, size: 10, color: 'red' },
    { dx: 20, dy: 60, size: 10, color: 'red' }
  ];

  const hydrogens = [
    { dx: 20, dy: -10, size: 6, color: 'white' },
    { dx: 50, dy: 0, size: 6, color: 'white' },
    { dx: 50, dy: 50, size: 6, color: 'white' },
    { dx: 40, dy: 60, size: 6, color: 'white' },
    { dx: 10, dy: 10, size: 6, color: 'white' },
    { dx: 20, dy: 85, size: 6, color: 'white' }
  ];

  const carbons = [
    { dx: 0, dy: 0, size: 10, color: 'gray' },
    { dx: 30, dy: 0, size: 10, color: 'gray' },
    { dx: 60, dy: 10, size: 10, color: 'gray' },
    { dx: 60, dy: 40, size: 10, color: 'gray' },
    { dx: 30, dy: 50, size: 10, color: 'gray' },
    { dx: 30, dy: 75, size: 10, color: 'gray' }
  ];

  const frontOxygens = [
    { dx: 70, dy: 0, size: 10, color: 'red' },
    { dx: 70, dy: 50, size: 10, color: 'red' },
    { dx: 40, dy: 85, size: 10, color: 'red' },
    { dx: 0, dy: 40, size: 10, color: 'red' }
  ];

  [...backOxygens, ...hydrogens, ...carbons, ...frontOxygens].forEach(atom => {
    ctx.beginPath();
    ctx.arc(originX + atom.dx * scale, originY + atom.dy * scale, atom.size, 0, Math.PI * 2);
    ctx.fillStyle = atom.color;
    ctx.fill();
    ctx.stroke();
  });
}

// INSIDE updateSolidDisplay()
else if (compound === "Glucose") {
  solidIons = [
    { type: 'glucose', x: 30, y: 20 },
    { type: 'glucose', x: 100, y: 80 }
  ];
}

// INSIDE dissolve()
else if (compound === "Glucose") {
  dissolvedIons = [
    { type: 'glucose', x: 60, y: 80, vx: 0.3, vy: 0.2 },
    { type: 'glucose', x: 130, y: 160, vx: -0.2, vy: 0.3 }
  ];
}

// INSIDE animate()
dissolvedIons.forEach(ion => {
  if (ion instanceof Ion) {
    ion.update();
    ion.draw(dissolvedCtx);
  } else if (ion.type === 'glucose') {
    ion.x += ion.vx;
    ion.y += ion.vy;
    if (ion.x < -10 || ion.x > dissolvedCanvas.width - 60) ion.vx *= -1;
    if (ion.y < -10 || ion.y > dissolvedCanvas.height - 60) ion.vy *= -1;
    drawGlucoseMolecule(dissolvedCtx, ion.x, ion.y);
  }
});

solidIons.forEach(ion => {
  if (ion instanceof Ion) {
    ion.draw(solidCtx);
  } else if (ion.type === 'glucose') {
    drawGlucoseMolecule(solidCtx, ion.x, ion.y);
  }
});
</script>
